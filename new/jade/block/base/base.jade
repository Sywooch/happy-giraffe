
//- Случайное целое между min и max
//- использование Math.round() даст неравномерное распределение!
mixin getRandomInt(min, max)
   - return Math.floor(Math.random() * (max - min + 1)) + min;





//- ava
//- Аватары пользователей
//- mod 
    vars
        icoStatus 
            ico-status__online
            ico-status__offline
        src - путь к изобржению аватара
mixin ava(mod, vars)
    a.ava(class=mod, href='')
        span.ico-status(class=vars.icoStatus)
        img.ava_img(alt='', src='#{vars.src}')


//- b-control
//- Блок иконок управления
    mod
    items - array иконок для вставки
        ['delete', 'favorite', 'spam', 'edit', 'cancel']
mixin b-control(mod, items)
    // b-control
    .b-control(class=mod)
        .b-control_hold
            for item in items
                case item
                    when "favorite"
                        .b-control_i
                            a.b-control_ico.powertip.b-control_ico__favorite(href="", title="В избранное")
                            .b-control_drop
                    when "delete"
                        .b-control_i
                            a.b-control_ico.powertip.b-control_ico__delete(href="", title="Удалить")
                            .b-control_drop
                    when "spam"
                        .b-control_i
                            a.b-control_ico.powertip.b-control_ico__spam(href="", title="Пожаловаться")
                            .b-control_drop
                    when "edit"
                        .b-control_i
                            a.b-control_ico.powertip.b-control_ico__edit(href="", title="Редактировать")
                            .b-control_drop
                    when "cancel"
                        .b-control_i
                            a.b-control_ico.powertip.b-control_ico__cancel(href="", title="Отменить")
                            .b-control_drop

    // /b-control

//- .side-menu
//- Фильтр пользователей
mixin side-menu(mod)
    // side-menu
    .side-menu(class=mod)
        .side-menu_hold
            .side-menu_t
            a.side-menu_i.active(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__all
                    span.side-menu_tx Все
                span.verticalalign-m-help
            a.side-menu_i(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__new
                    span.side-menu_tx Новые
                    span.side-menu_count 59
                span.verticalalign-m-help
            a.side-menu_i(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__online
                    span.side-menu_tx Кто онлайн
                span.verticalalign-m-help
            a.side-menu_i.disabled(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__online-friend
                    span.side-menu_tx Друзья онлайн
                span.verticalalign-m-help
    // /side-menu

//- .b-cap
//- Заглушка
    mod
    vars
        imgMod
        t
        tMod
        tx
        txMod
        txSsub
        txSubMod
mixin cap-empty(mod, vars)
    // cap-empty
    .cap-empty
        .cap-empty_hold
            .cap-empty_img(class=vars.imgMod)
            - if (vars.t)
                .cap-empty_t(class=vars.tMod)!= vars.t +getRandomInt(min, max)
            - if (vars.tx)
                .cap-empty_tx(class=vars.txMod)!= vars.tx
            - if (vars.txSub)
                .cap-empty_tx-sub(class=vars.txSubMod)!= vars.txSub
    // /cap-empty

//- wisywig редактор с кнопками утправления винзу
//- redactor-control-b
mixin redactor-control-b(mod, vars)
    .im-editor-b_w.redactor-control-b
        textarea.redactor(cols='40', name='redactor', rows='1', autofocus='autofocus')
        .redactor-control-b_toolbar
        .redactor-control-b_control
        .redactor-control-b_key
            input.redactor-control-b_key-checkbox(type='checkbox', name='')
            label.redactor-control-b_key-label(for='redactor-control-b_key-checkbox') Enter - отправить
            button.btn-green Отправить
        script.
            $(document).ready(function () { 
              $('.redactor').redactor({
                  minHeight: 17,
                  autoresize: true,
                  focus: true,
                  toolbarExternal: '.redactor-control-b_toolbar',
                  buttons: ['image', 'video', 'smile'],
                  buttonsCustom: {
                      smile: {
                          title: 'smile',
                          callback: function(buttonName, buttonDOM, buttonObject) {
                              // your code, for example - getting code
                              var html = this.get();
                          }
                      }
                  }
                  ,
                  changeCallback: function(html)
                    {   
                        im.messagesHeight();
                        if((im.wrapper.height() - im.container.scrollTop()) < im.container.height() + 30) {
                            im.scrollBottom();
                        }
                    }
              });
            });

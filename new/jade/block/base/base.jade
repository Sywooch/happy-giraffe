
//- ava
//- Аватары пользователей
//- mod 
    vars
        icoStatus 
            ico-status__online
            ico-status__offline
        src - путь к изобржению аватара
        avaSpan 
mixin ava(mod, vars)
    - if (vars.avaSpan)
        span.ava(class=mod, href='')
            span.ico-status(class=vars.icoStatus)
            img.ava_img(alt='', src='#{vars.src}')
    -else 
        a.ava(class=mod, href='')
            span.ico-status(class=vars.icoStatus)
            img.ava_img(alt='', src='#{vars.src}')


//- b-control
//- Блок иконок управления
    mod
    items - array иконок для вставки
        ['delete', 'favorite', 'spam', 'edit', 'cancel']
mixin b-control(mod, items)
    // b-control
    .b-control(class=mod)
        .b-control_hold
            for item in items
                case item
                    when "favorite"
                        .b-control_i
                            span.b-control_ico.powertip.b-control_ico__favorite(title="В избранное")
                            .b-control_drop
                    when "delete"
                        .b-control_i
                            span.b-control_ico.powertip.b-control_ico__delete(title="Удалить")
                            .b-control_drop
                    when "spam"
                        .b-control_i.tooltip-click-b
                            span.b-control_ico.powertip.b-control_ico__spam(title="Пожаловаться")
                            .tooltip-drop
                                .tooltip-popup
                                    .tooltip-popup_t Укажите вид нарушения:
                                    label.tooltip-popup_label.clearfix(for='tooltip-popup_radio')
                                    // id у input должны быть все разные, приведен пример для связки label с input атрибут name у каждого выпадающего окношка должен быть разный
                                        input#tooltip-popup_radio.tooltip-popup_radio(type='radio', name='tooltip-popup_radio')
                                        | Спам или реклама
                                    label.tooltip-popup_label.clearfix(for='')
                                        input.tooltip-popup_radio(type='radio', name='tooltip-popup_radio')
                                        | Мошенничество
                                    label.tooltip-popup_label.clearfix(for='')
                                        input.tooltip-popup_radio(type='radio', name='tooltip-popup_radio')
                                        | Грубость, угрозы
                                    label.tooltip-popup_label.clearfix(for='')
                                        input.tooltip-popup_radio(type='radio', name='tooltip-popup_radio')
                                        | Интимный характер
                                    label.tooltip-popup_label.clearfix(for='')
                                        input.tooltip-popup_radio(type='radio', name='tooltip-popup_radio')
                                        | Другое
                                    label.tooltip-popup_label.clearfix(for='')
                                        input.tooltip-popup_radio(type='radio', name='tooltip-popup_radio')
                                        input.tooltip-popup_itx(type='text', name='', placeholder='Другое')
                                    .clearfix.textalign-c
                                        button.btn-green.btn-inactive Пожаловаться
                                        button.btn-gray-light Отменить

                    when "edit"
                        .b-control_i
                            span.b-control_ico.powertip.b-control_ico__edit(title="Редактировать")
                            .b-control_drop
                    when "cancel"
                        .b-control_i
                            span.b-control_ico.powertip.b-control_ico__cancel(title="Отменить")
                            .b-control_drop

    // /b-control

//- .side-menu
//- Фильтр пользователей
mixin side-menu(mod)
    // side-menu
    .side-menu(class=mod)
        .side-menu_hold
            .side-menu_t
            a.side-menu_i.active(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__all
                    span.side-menu_tx Все
                span.verticalalign-m-help
            a.side-menu_i(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__new
                    span.side-menu_tx Новые
                    span.side-menu_count 96
                span.verticalalign-m-help
            a.side-menu_i(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__online
                    span.side-menu_tx Кто онлайн
                span.verticalalign-m-help
                span.side-menu_count-sub 5945
            a.side-menu_i.disabled(href="")
                span.side-menu_i-hold
                    span.side-menu_ico.side-menu_ico__online-friend
                    span.side-menu_tx Друзья онлайн
                span.verticalalign-m-help
                span.side-menu_count-sub 0
    // /side-menu

//- .b-cap
//- Заглушка
    mod
    vars
        imgMod
        t
        tMod
        tx
        txMod
        txSsub
        txSubMod
mixin cap-empty(mod, vars)
    // cap-empty
    .cap-empty(class=mod)
        .cap-empty_hold
            .cap-empty_img(class=vars.imgMod)
            - if (vars.t)
                .cap-empty_t(class=vars.tMod)!= vars.t
            - if (vars.tx)
                .cap-empty_tx(class=vars.txMod)!= vars.tx
            - if (vars.txSub)
                .cap-empty_tx-sub(class=vars.txSubMod)!= vars.txSub
        .verticalalign-m-help
    // /cap-empty


//- wisywig редактор с кнопками утправления винзу
//- redactor-control
mixin redactor-control(mod, vars)
    .redactor-control
        .redactor-control_hold
            .scroll
                .scroll_scroller
                    .scroll_cont
                        textarea.redactor(cols='40', name='redactor', rows='1', autofocus='autofocus')
                    .scroll_bar-hold
                        .scroll_bar
                            .scroll_bar-in
        .redactor-control_toolbar
        .redactor-control_control
            .redactor-control_key
                input.redactor-control_key-checkbox(type='checkbox', name='')
                label.redactor-control_key-label(for='redactor-control-b_key-checkbox') Enter - отправить
            button.btn-green Отправить
        script.
            $(document).ready(function () { 
              $('.redactor').redactor({
                minHeight: 20,
                autoresize: true,
                focus: true,
                toolbarExternal: '.redactor-control_toolbar',
                buttons: ['image', 'video', 'smile'],
                buttonsCustom: {
                  smile: {
                      title: 'smile',
                      callback: function(buttonName, buttonDOM, buttonObject) {
                          // your code, for example - getting code
                          var html = this.get();
                      }
                  }
                },
                focusCallback: function(e)
                {
                    // Нужно выбирать непосредственного родителя
                    $('.redactor-control_hold').addClass('redactor-control_hold__focus');
                },
                changeCallback: function(html)
                {   
                    im.containerHeight();
                    // Нужно выбирать непосредственного родителя
                    var bParrent = $('.redactor-control_hold');
                    if(bParrent.height() >= 250) {
                        bParrent.height(250);
                    }
                },
                initCallback: function()
                {
                    im.containerHeight();
                    im.msgToBottom();
                }
              });
            });

<div class="user-album clearfix" data-bind="if: loading() === false">
    <div class="user-album_top clearfix">
        <!-- Счетчик серого цвета из-за .user-album_count-hold__gray-->
        <div data-bind="css: photoAlbum.photoCount() > 0 ? 'user-album_count-hold' : 'user-album_count-hold user-album_count-hold__gray'">
            <div class="user-album_count" data-bind="text: photoAlbum.photoCount()"></div>
            <div class="user-album_count-tx">фото</div>
        </div>
        <!-- Заголовок-->
        <div class="user-album_switch" data-bind="if: photoAlbum.editing() === false">
            <h1 class="user-album_t">
                <span data-bind="text: photoAlbum.title()"></span>
                <!-- ko if: rightsForManipulation === true -->
                <a class="ico-edit ico-edit__s" data-bind="click: edit"></a>
                <!-- /ko -->
            </h1>
        </div>
        <div class="user-album_desc">
            <div class="user-album_switch" data-bind="if: photoAlbum.editing() === false">
                <!-- ko if: rightsForManipulation === true -->
                <span data-bind="text: photoAlbum.description() !== '' ?  photoAlbum.description() : 'Введите описание альбома'"></span>
                <!-- /ko -->
                <!-- ko if: rightsForManipulation === false -->
                <span data-bind="text: photoAlbum.description() !== '' ?  photoAlbum.description() : ''"></span>
                <!-- /ko -->
            </div>
        </div>
        <!-- ko if: photoAlbum.editing() === true && rightsForManipulation === true -->
        <photo-albums-create params="photoAlbum: photoAlbum, edit: true">
            <div class="postion-r" style="height: 350px; width: 560px; margin-top: 10px;">
                <div class="b-loader b-loader__abs">
                    <div class="b-loader_hold">
                      <!-- Размеры можно задавать:-->
                      <!-- через классы (рекомендовано) -->
                      <!-- .b-loader_circle - 50px-->
                      <!-- .b-loader_circle__l - 125px-->
                      <!-- или через style-->
                      <!-- style='width: 125px; height: 125px;'-->
                      <div vars.size class="b-loader_circle"><?xml version="1.0" encoding="utf-8"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 125 125" enable-background="new 0 0 125 125"><defs><path id="a" d="M62.5 0C28 0 0 28 0 62.5S28 125 62.5 125 125 97 125 62.5 97 0 62.5 0zm0 112.5c-27.6 0-50-22.4-50-50s22.4-50 50-50 50 22.4 50 50-22.4 50-50 50z"/></defs><clipPath id="b"><use xlink:href="#a" overflow="visible"/></clipPath><path fill-rule="evenodd" clip-rule="evenodd" fill="#AA96D2" d="M2 8.7l60.2 54.4 32.7-75z" clip-path="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#FF8232" d="M94.6-11.8l-33 74.6 82.2 6.6z" clip-path="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#FFE641" d="M61.1 62.6l19.9 79 62.8-73.2z" clip-path="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#64B9EB" d="M61.6 62.8l-68.4 39.7 88 38.6z" clip-path="url(#b)"/><path fill-rule="evenodd" clip-rule="evenodd" fill="#73C869" d="M3.1 8.6l-9 94.6 67.8-40.4z" clip-path="url(#b)"/></svg>
                      </div>
                      <div class="b-loader_tx"> Загрузка создания</div>
                </div>
            </div>
        </photo-albums-create>
        <!-- /ko -->
    </div>
    <!-- ko if: rightsForManipulation === true -->
    <div class="user-album_control clearfix">
        <a href="" class="user-album_del" data-bind="click: remove">Удалить альбом</a>
        <!-- ko if: photoAlbum.photoCollection().attaches().length > 0 -->
        <!--<a href="" class="user-album_sort">Упорядочить фото</a>-->
        <!--<a href="" class="user-album_move">Переместить в другой альбом</a>-->
        <!-- /ko -->
    </div>
    <!-- /ko -->
    <!-- ko if: photoAlbum.photoCount() === 0 && rightsForManipulation === true -->
    <div class="album-photo-add album-photo-add__big" data-bind="photoComponentUpload: { data: { multiple: true, collectionId: photoAlbum.photoCollection().id(),  }, observable: photoAlbum.photoCollection().attaches }, click: loadPhotoComponent">
        <div class="album-photo-add_hold">Загрузить <br>фото в альбом</div>
    </div>
    <!-- /ko -->
    <!-- ko if: photoAlbum.photoCollection().attaches().length > 0 -->
    <div class="img-grid">
        <div id="imgs" class='img-grid_row'>
            <!-- ko if: photoAlbum.photoCount() !== 0 && rightsForManipulation === true -->
            <div style="width: 280px; height: 380px;" class="img-grid_i visible-md-block" data-bind="photoComponentUpload: { data: { multiple: true, collectionId: photoAlbum.photoCollection().id() }, observable: photoAlbum.photoCollection().attaches }, click: loadPhotoComponent">
                <div class="album-photo-add album-photo-add__m">
                    <div class="album-photo-add_hold">Загрузить еще<br>фото в альбом</div>
                </div>
            </div>
            <!-- /ko -->
            <!-- ko foreach: photoAlbum.photoCollection().attaches() -->
            <div class="img-grid_i" data-bind="attr: { 'style': 'width: ' +  photo().presetWidth() + 'px; height: ' + photo().presetHeight() + 'px;' }">
                <!--<picture class="img-grid_img loading">-->
                    <img src="" data-bind="src: photo().getGeneratedPreset('albumList'), attr: { 'data-id': id(), 'width': photo().presetWidth(), 'height': photo().presetHeight() }" alt="Фото">
                <!--</picture>-->
                <!-- ko if: loading() === true -->
                <div class="img-grid_loading img-grid_loading__purple" data-bind="css: $parent.returnNewColor($index)">
                    <div class="img-grid_loading-hold">
                        <div class="loader-circle">
                            <div class="loader-circle_hold">
                                <div class="loader-circle_1"></div>
                                <div class="loader-circle_2"></div>
                            </div>
                        </div>
                        <div class="img-grid_loading-tx">Загрузка фотографии</div>
                    </div>
                </div>
                <!-- /ko -->
                <!-- ko if: loading() === false && broke() === false -->
                    <!-- ko if: $parent.rightsForManipulation === true -->
                    <div class="img-grid_overlay">
                        <span class="ico-zoom ico-zoom__abs" data-bind="click: function () { $parent.openPhotoHandler($data); }"></span>
                            <!--<div class="img-grid_ico-ava"></div>-->
                            <div data-bind="css: { 'active': isCover() === true || $parent.photoAlbum.photoCollection().cover().id() === id(),  'img-grid_ico-album': true }, click: function () {$parent.setCoverAlbum($parent.photoAlbum.photoCollection().id(), $data) }"></div>
                            <div class="img-grid_overlay-b"><a href="" title="Удалить фото" class="ico-trash powertip" data-bind="click: remove"></a>
                                <!--<a href="" title="Редактировать" class="ico-photo-edit powertip"></a>-->
                                <!--<a href="" title="Переместить" class="ico-move powertip"></a>-->
                            </div>
                        
                    </div>
                    <!-- /ko -->
                    <!-- ko if: $parent.rightsForManipulation === false -->
                    <div class="img-grid_overlay" data-bind="click: function () { $parent.openPhotoHandler($data); }">
                        <span class="ico-zoom ico-zoom__abs"></span>
                    </div>
                    <!-- /ko -->
                <!-- /ko  -->
                <!-- ko if: removed() === true -->
                <div class="cap-empty cap-empty__abs cap-empty__white">
                    <div class="cap-empty_hold">
                        <div class="cap-empty_img"></div>
                        <div class="cap-empty_t">Фотография удалена </div>
                        <div class="cap-empty_tx"><a href="" data-bind="click: restore">Восстановить</a></div>
                    </div>
                    <div class="verticalalign-m-help"></div>
                </div>
                <!-- /ko -->
                <!-- ko if: broke() === true -->
                <div class="cap-empty cap-empty__abs cap-empty__white">
                    <div class="cap-empty_hold">
                        <div class="cap-empty_img"></div>
                        <div class="cap-empty_t">Ошибка отображения</div>
                    </div>
                    <div class="verticalalign-m-help"></div>
                </div>
                <!-- /ko -->
            </div>
            <!-- /ko -->
        </div>
    </div>
    <!-- /ko -->

    <!-- ko if: photoAlbum.removed() === true  -->
    <div class="cap-empty cap-empty__abs-top cap-empty__white ">
        <div class="cap-empty_hold">
            <div class="cap-empty_img"></div>
            <div class="cap-empty_t">Фотоальбом удален </div>
            <div class="cap-empty_tx"><a href="" data-bind="click: restore">Восстановить</a></div>
        </div>
        <div class="verticalalign-m-help"></div>
    </div>
    <!-- /ko -->
</div>
<!-- ko if: opened() === true -->
<photo-slider params="photo: currentPhoto(), collectionId: photoAlbum.photoCollection().id(), userId: userId, title: photoAlbum.title(), description: photoAlbum.description()"></photo-slider>
<!-- /ko -->
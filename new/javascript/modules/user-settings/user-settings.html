<!-- ko if: loaded() === true -->
<div class="user-settings form-edit">
    <div class="user-settings_hold">
        <div class="heading-xxl">Настройки профиля</div>
    </div>
    <div class="user-settings_hold">
        <div class="user-settings_row" data-bind="with: user.firstName">
            <!-- ko if: $data.editing() === false && $data.value() -->
            <span class="form-edit_name" data-bind="text: value"></span>
            <a href="#" class="ico-edit ico-edit__s powertip" data-bind="click: $parent.beginEditField"></a>
            <!-- /ko -->
            <!-- ko if: $data.editing() === true -->
            <div class="user-settings_w-inp" data-bind="css: $data.errors().length > 0 ? 'inp-valid inp-valid__abs error' : 'inp-valid inp-valid__abs'">
                <input type="text" placeholder="Имя" class="itx-gray form-edit_itx" data-bind="value: $data.value">
                <div class="inp-valid_error" data-bind="visible: $data.errors().length > 0">
                    <div class="errorMessage" data-bind="text: $data.errors()[0]">Ошибка</div>
                </div>
            </div>
            <div class="btn btn-success btn-xs" data-bind="click: $parent.endEditField.bind($parent), css: { 'disabled': $data.value.isValid() === false }">Ok</div>
            <!-- /ko -->
        </div>
        <div class="user-settings_row" data-bind="with: user.lastName">
            <!-- ko if: $data.editing() === false && $data.value() -->
            <span class="form-edit_name" data-bind="text: value"></span>
            <a href="#" class="ico-edit ico-edit__s powertip" data-bind="click: $parent.beginEditField"></a>
            <!-- /ko -->
            <!-- ko if: $data.editing() === true -->
            <div class="user-settings_w-inp" data-bind="css: $data.errors().length > 0 ? 'inp-valid inp-valid__abs error' : 'inp-valid inp-valid__abs'">
                <input type="text" placeholder="Фамилия" class="itx-gray form-edit_itx" data-bind="value: $data.value">
                <div class="inp-valid_error" data-bind="visible: $data.errors().length > 0">
                    <div class="errorMessage" data-bind="text: $data.errors()[0]">Ошибка</div>
                </div>
            </div>
            <div class="btn btn-success btn-xs" data-bind="click: $parent.endEditField.bind($parent), css: { 'disabled': $data.value.isValid() === false }"">Ok</div>
            <!-- /ko -->
        </div>
    </div>
    <div class="user-settings_hold">
        <div class="user-settings_row" data-bind="with: user.birthday">
            <!-- ko if: $data.editing() === false && $data.value() -->
                <div class="user-settings_col-label">
                    <label for="" class="form-edit_label">Дата рождения</label>
                </div>
                <div class="user-settings_col-inp">
                    <span class="form-edit_tx" data-bind="text: $data.value()"></span>
                    <a href="#" class="ico-edit ico-edit__s powertip" data-bind="click: $parent.beginEditField"></a>
                </div>
            <!-- /ko -->
            <!-- ko if: $data.editing() === true -->
                <div class="user-settings_col-label">
                    <label for="" class="form-edit_label">Дата рождения</label>
                </div>
                <div class="user-settings_col-inp">
                    <div class="inp-valid inp-valid__abs" data-bind="css: $data.errors().length > 0 ? 'inp-valid inp-valid__abs error' : 'inp-valid inp-valid__abs'">
                        <div class="float-l w-80 margin-r10">
                            <select placeholder="День" class="select-cus select-cus__search-off select-cus__gray" data-bind="options: $parent.days, value: $data.day, valueAllowUnset: true, optionsCaption: 'День'">
                            </select>
                        </div>
                        <div class="float-l w-135 margin-r10">
                            <select placeholder="Месяц" class="select-cus select-cus__search-off select-cus__gray" data-bind="options: $parent.months, optionsText: 'name', optionsValue: 'id', value: $data.month, valueAllowUnset: true, optionsCaption: 'Месяц'">
                            </select>
                        </div>
                        <div class="float-l w-80">
                            <select placeholder="Год" class="select-cus select-cus__search-off select-cus__gray" data-bind="options: $parent.years, value: $data.year, valueAllowUnset: true, optionsCaption: 'Год'">
                            </select>
                        </div>
                        <div class="inp-valid_error" data-bind="visible: $data.errors().length > 0"><div class="errorMessage" data-bind="text: $data.errors()[0]"></div></div>
                    </div>
                    <div class="btn btn-success btn-xs" data-bind="click: $parent.endEditDateField.bind($parent)">Ok</div>
                </div>
            <!-- /ko -->
        </div>
        <!-- Дата рождения-->
        <!-- /Дата рождения-->
        <!-- пол-->
        <div class="user-settings_row" data-bind="with: user.gender">
            <div class="user-settings_col-label">
                <label for="" class="form-edit_label">Пол</label>
            </div>
            <div class="user-settings_col-inp">
                <div class="inp-valid inp-valid__abs user-settings_w-inp">
                    <div class="radio-icons">
                        <input id="radio4" type="radio" name="b-radio2" class="radio-icons_radio" value="1" data-bind="checked: value, event: { change: $parent.changeGender.bind($parent) }">
                        <label for="radio4" class="radio-icons_label">Мужской</label>
                        <input id="radio3" type="radio" name="b-radio2" class="radio-icons_radio" value="0" data-bind="checked: value, event: { change: $parent.changeGender.bind($parent) }">
                        <label for="radio3" class="radio-icons_label">Женский</label>
                    </div>
                    <div class="inp-valid_error">
                        <div class="errorMessage">

                            Выберите пол
                        </div>
                    </div>
                    <div class="inp-valid_success inp-valid_success__ico-check"></div>
                </div>
            </div>
        </div>
        <!-- /пол-->
        <!-- Местоположение-->
        <div class="user-settings_row" data-bind="with: user.address">
            <div class="user-settings_col-label">
                <label for="" class="form-edit_label">Местоположение</label>
            </div>
            <!-- ko if: $data.editing() === false && $data.value() -->
            <div class="user-settings_col-inp">
                <span data-bind="attr: { class: 'flag flag-' + $data.value().country.isoCode }"></span>
                <span class="form-edit_tx" data-bind="text: $parent.user.fullGeography"></span>
                <a href="#" class="ico-edit ico-edit__s powertip" data-bind="click: $parent.beginLocationEditField.bind($parent)"></a>
            </div>
            <!-- /ko -->
            <!-- ko if: $data.editing() === true -->
            <div class="user-settings_col-inp">
                <div class="user-settings_row">
                    <div class="inp-valid inp-valid__abs user-settings_w-inp">
                        <!-- ko if: $parent.countries().length > 0 -->
                        <select placeholder="Выберите страну" class="select-cus select-cus__js-country select-cus__gray" data-bind="options: $parent.countries, optionsText: 'name', optionsValue: 'id', value: $data.value().country.id"></select>
                        <div class="inp-valid_error">
                            <div class="errorMessage">
                            </div>
                        </div>
                        <div class="inp-valid_success inp-valid_success__ico-check"></div>
                        <!-- /ko -->
                    </div>
                </div>
                <!-- ko if: $data.value().country.citiesFilled === 1  -->
                <div class="user-settings_row">
                    <div class="inp-valid inp-valid__abs user-settings_w-inp">
                        <input type="hidden" class="select-cus select-cus__search-on select-cus__gray" placeholder="Выберите город" value="$data.value().city.name" />
                        <div class="inp-valid_error">
                            <div class="errorMessage">
                            </div>
                        </div>
                        <div class="inp-valid_success inp-valid_success__ico-check"></div>
                    </div>
                </div>
                <!-- /ko -->
                <div class="user-settings_row user-settings_w-inp textalign-r">
                    <div class="btn btn-success btn-xs" data-bind="click: $parent.endEditDateField.bind($parent)">Ok</div>
                </div>
            </div>
            <!-- /ko -->
        </div>
        <!-- /Местоположение-->
    </div>
    <div class="user-settings_hold">
        <div class="heading-small">Настройки аккаунта</div>
        <!-- email-->
        <div class="user-settings_row" data-bind="with: user.email">
            <div class="user-settings_col-label">
                <label for="" class="form-edit_label">E-mail</label>
            </div>
            <!-- ko if: $data.editing() === false && $data.value() -->
                <div class="user-settings_col-inp">
                    <span class="form-edit_tx" data-bind="text: value"></span>
                    <a href="#" class="ico-edit ico-edit__s powertip" data-bind="click: $parent.beginEditField"></a>
                </div>
            <!-- /ko -->
            <!-- ko if: $data.editing() === true -->
                <div class="user-settings_w-inp" data-bind="css: $data.errors().length > 0 ? 'inp-valid inp-valid__abs error' : 'inp-valid inp-valid__abs'">
                    <input type="text" placeholder="Email" class="itx-gray form-edit_itx" data-bind="value: $data.value">
                    <div class="inp-valid_error" data-bind="visible: $data.errors().length > 0">
                        <div class="errorMessage" data-bind="text: $data.errors()[0]">Ошибка</div>
                    </div>
                </div>
                <div class="btn btn-success btn-xs" data-bind="click: $parent.changeEmailField.bind($parent)">Ok</div>
            <!-- /ko -->
        </div>
        <!-- /email-->
        <!-- email-->
        <!-- /email-->
        <!-- пароль -->
        <div class="user-settings_row" data-bind="with: user.password">
            <div class="user-settings_col-label">
                <label for="" class="form-edit_label">Пароль</label>
            </div>
            <!-- ko if: $data.editing() === false -->
                <div class="user-settings_col-inp">
                    <span class="form-edit_tx">••••••••</span>
                    <a href="#" class="ico-edit ico-edit__s powertip" data-bind="click: $parent.beginEditField"></a>
                </div>
            <!-- /ko -->
            <!-- ko if: $data.editing() === true -->
            <div class="user-settings_col-inp">
                <div class="user-settings_row">
                    <div class="inp-valid inp-valid__abs user-settings_w-inp" data-bind="css: $data.errors().length > 0 ? 'inp-valid inp-valid__abs error' : 'inp-valid inp-valid__abs'">
                        <input type="password" placeholder="Новый пароль" class="itx-gray form-edit_itx" data-bind="value: $data.value">
                        <div class="inp-valid_error" data-bind="visible: $data.errors().length > 0">
                            <div class="errorMessage" data-bind="text: $data.errors()[0]">Ошибка</div>
                        </div>
                    </div>
                </div>
                <div class="user-settings_row">
                    <div class="inp-valid inp-valid__abs user-settings_w-inp" data-bind="css: $parent.equalPassword() !== $data.value() ? 'inp-valid inp-valid__abs error' : 'inp-valid inp-valid__abs'">
                        <input type="password" placeholder="Новый пароль еще раз" class="itx-gray form-edit_itx" data-bind="value: $parent.equalPassword">
                        <!-- ko if: $parent.equalPassword() !== $data.value() -->
                        <div class="inp-valid_error">
                            <div class="errorMessage">Пароли не совпадают</div>
                        </div>
                        <!-- /ko -->
                    </div>
                </div>
                <div class="user-settings_row user-settings_w-inp textalign-r">
                    <div class="btn btn-success btn-xs" data-bind="css: { 'disabled': $parent.equalPassword() !== $data.value() || $parent.equalPassword() === '' }, click: $parent.changePasswordField.bind($parent)" data-bind="click: $parent.endEditField.bind($parent)">Ok</div>
                </div>
            </div>
            <!-- /ko -->
        </div>
        <!-- /пароль-->
        <!-- пароль-->
        <!-- /пароль-->
    </div>
    <!-- соц сети-->
    <div class="user-settings_hold">
        <div class="heading-small">Coциальные сети</div>
        <div class="form-edit_tx">Нажмите на соответствующую иконку соц. сети, чтобы связать ее с вашим аккаунтом.</div>
        <div class="user-settings_soc">
            <ul class="ico-social-ul">
                <!-- ko if: user.socialServices.value().odnoklassniki -->
                <li class="ico-social-ul_li" data-bind="with: user.socialServices.value().odnoklassniki">
                    <a href="/users/default/addSocialService/?service=odnoklassniki" class="ico-social ico-social__l ico-social__odnoklassniki active" data-bind="click: $parent.user.removeSocial.bind($parent.user)"></a>
                </li>
                <!-- /ko -->
                <!-- ko ifnot: user.socialServices.value().odnoklassniki -->
                <li class="ico-social-ul_li">
                    <a href="/users/default/addSocialService/?service=odnoklassniki" class="ico-social ico-social__l ico-social__odnoklassniki"></a>
                </li>
                <!-- /ko -->
                <!-- ko if: user.socialServices.value().vkontakte -->
                <li class="ico-social-ul_li" data-bind="with: user.socialServices.value().vkontakte">
                    <a href="/users/default/addSocialService/?service=vkontakte" class="ico-social ico-social__l ico-social__vkontakte active" data-bind="click: $parent.user.removeSocial.bind($parent.user)"></a>
                </li>
                <!-- /ko -->
                <!-- ko ifnot: user.socialServices.value().vkontakte -->
                <li class="ico-social-ul_li">
                    <a href="/users/default/addSocialService/?service=vkontakte" class="ico-social ico-social__l ico-social__vkontakte"></a>
                </li>
                <!-- /ko -->
            </ul>
        </div>
    </div>
    <!-- /соц сети-->

    <!-- Рассылки-->
    <div class="user-settings_hold">
        <div class="heading-small">Настройки рассылок на электронную почту</div>
        <div class="inp-valid inp-valid__abs user-settings_w-inp w-a">
            <div class="radio-icons radio-icons__checkbox" data-bind="with: user.subscriptionMail">
                <input id="mail1" type="checkbox" name="mail1" class="radio-icons_radio" data-bind="checked: value">
                <label for="mail1" class="radio-icons_label">
                    <div class="form-edit_tx">Я хочу получать еженедельные новости от Веселого жирафа.</div>
                </label>
            </div>
            <div class="inp-valid_error">
                <div class="errorMessage">
                    Ошибка
                </div>
            </div>
            <div class="inp-valid_success inp-valid_success__ico-check"></div>
        </div>
    </div>
    <!-- /Рассылки-->
    <!-- -->
    <div class="user-settings_hold">
        <div class="form-edit_tx">
            Я  хочу <a class="btn btn-sm btn-secondary" data-bind="click: removeUser">Удалить анкету </a> , потеряв всю введенную информацию без возможности восстановления.
        </div>
    </div>
    <!-- /-->
</div>
<!-- /ko -->